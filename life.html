<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life | See, Listen, Move</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            /* Smooth scroll */
            background-color: #000;
            margin: 0;
            overflow-x: hidden;
        }

        /* Navbar */
        .navbar {
            position: fixed;
            mix-blend-mode: normal !important;
            z-index: 1000;
        }

        .nav-logo a,
        .nav-link {
            color: #fff !important;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        /* Section 1: Hero */
        .life-hero {
            position: fixed;
            inset: 0;
            height: 100vh;
            width: 100%;
            background: url('https://personal-website-images.b-cdn.net/life_hero.jpg') no-repeat center center/cover;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            transition: opacity 1.5s ease-in-out, transform 1.5s cubic-bezier(0.65, 0, 0.35, 1);
        }

        .life-hero-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.2);
        }

        .life-hero-text {
            position: relative;
            z-index: 2;
            font-family: var(--font-heading);
            font-size: 3rem;
            color: #fff;
            text-align: center;
            max-width: 900px;
            line-height: 1.4;
            font-style: italic;
            opacity: 0;
            transform: translateY(20px);
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            transition: opacity 1.5s ease, transform 1.5s ease;
        }

        .life-hero-text.animate {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Page Loader --- */
        .page-loader {
            position: fixed;
            inset: 0;
            z-index: 5000;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }

        .loader-bg-blur {
            position: absolute;
            inset: 0;
            background: url('https://personal-website-images.b-cdn.net/life_hero.jpg') no-repeat center center/cover;
            filter: blur(30px) brightness(0.5);
            transform: scale(1.1);
        }

        .loader-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .loader-circle {
            width: 40px;
            height: 40px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-top: 2px solid var(--accent-gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1.5rem auto;
        }

        .loader-text {
            font-family: var(--font-body);
            color: #fff;
            font-size: 0.8rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            opacity: 0.6;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-active .sub-scroll-container,
        .loading-active .life-hero,
        .loading-active .life-split-section {
            filter: blur(20px);
            transition: filter 1s ease;
        }

        /* Section 2: The Tri-Split */
        .life-split-section {
            height: 100vh;
            width: 100%;
            position: relative;
            overflow: hidden;
            background: #000;
        }

        .life-pane {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 100%;
            /* Changed to 100% for full canvas */
            height: 100%;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            overflow: hidden;
        }

        .life-pane-bg {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            transform-origin: center;
            transition: transform 0.8s ease;
        }

        .life-pane-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.6));
            transition: background 0.4s ease;
        }

        .life-pane-content {
            position: absolute;
            bottom: 10%;
            /* Left will be specific to pane */
            transform: translateX(-50%);
            text-align: center;
            white-space: nowrap;
            pointer-events: none;
            z-index: 10;
        }

        .life-pane-title {
            font-family: var(--font-heading);
            font-size: 3.5rem;
            color: #fff;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            text-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            transition: transform 0.4s ease, color 0.4s ease;
        }

        .life-pane-subtitle {
            font-family: var(--font-body);
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 0.5rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease;
        }

        /* 
           Clip Paths Logic:
           All panes are 100% width now. 
           We clip to reveal sectors.
        */

        /* PANE 1: SEE (Left) - Z:3 */
        .life-pane-see {
            z-index: 3;
            clip-path: polygon(0 0,
                    35% 0,
                    38% 50%,
                    32% 100%,
                    0 100%);
        }

        .life-pane-see .life-pane-content {
            left: 17%;
            /* Centered in the visible slice */
        }

        /* PANE 2: LISTEN (Center) - Z:2 */
        .life-pane-listen {
            z-index: 2;
            pointer-events: auto;
            /* Ensure clickable */
            clip-path: polygon(35% 0,
                    70% 0,
                    65% 50%,
                    68% 100%,
                    32% 100%,
                    38% 50%);
        }

        .life-pane-listen .life-pane-content {
            left: 52%;
            /* Centered in middle slice */
        }

        /* PANE 3: MOVE (Right) - Z:1 */
        .life-pane-move {
            z-index: 1;
            /* 
               Since it's at the bottom, we don't strictly *need* clip-path if others cover it,
               but for hover effects (scale bg) we want strict boundaries so it doesn't spill over?
               Actually, scale bg is inside. 
               But 'overlay' is inside. 
               If we don't clip move, and we hover 'move', the 'move' bg is full screen hidden by others.
               The user sees the right slice.
               If we clip it, it's safer.
            */
            clip-path: polygon(70% 0,
                    100% 0,
                    100% 100%,
                    68% 100%,
                    65% 50%);
        }

        .life-pane-move .life-pane-content {
            left: 85%;
            /* Centered in right slice */
        }

        /* Hover Effects */
        .life-pane:hover .life-pane-bg {
            transform: scale(1.05);
            /* Slight zoom */
        }

        .life-pane:hover .life-pane-overlay {
            background: rgba(0, 0, 0, 0);
            /* Brighten */
        }

        .life-pane:hover .life-pane-title {
            transform: scale(1.1);
            color: var(--accent-gold);
        }

        .life-pane:hover .life-pane-subtitle {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>

<body class="loading-active">

    <!-- Page Loader -->
    <div id="page-loader" class="page-loader">
        <div class="loader-bg-blur"></div>
        <div class="loader-content">
            <div class="loader-circle"></div>
            <div class="loader-text" data-i18n="life.loader">Loading Harmony...</div>
        </div>
    </div>

    <nav class="navbar">
        <div class="nav-logo">
            <a href="index.html?skip=true" style="text-decoration: none;">LUIS</a>
        </div>
        <ul class="nav-links">
            <li class="mobile-only"><a href="index.html?skip=true" class="nav-link" data-i18n="nav.home">Home</a></li>
            <li><a href="education.html" class="nav-link" data-i18n="nav.education">Education</a></li>
            <li><a href="career.html" class="nav-link" data-i18n="nav.career">Career</a></li>
            <li><a href="projects.html" class="nav-link" data-i18n="nav.projects">Projects</a></li>
            <li><a href="life.html" class="nav-link" data-i18n="nav.life">Life</a></li>
            <li><a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a></li>
        </ul>
    </nav>

    <!-- Section 1: Hero (Intro Overlay) -->
    <section class="life-hero" id="lifeIntro">
        <div class="life-hero-overlay"></div>
        <div class="life-hero-text" data-i18n="life.intro">
            "Practices that shape how I see, listen, and move."
        </div>
    </section>

    <!-- Section 2: Split Views -->
    <section class="life-split-section">
        <!-- PANE 1: SEE -->
        <div class="life-pane life-pane-see" onclick="openGallery('see')">
            <div class="life-pane-bg"
                style="background-image: url('https://personal-website-images.b-cdn.net/life_see.jpg'); background-size: 100%; background-position: -30vw 45%;">
            </div>
            <div class="life-pane-overlay"></div>
            <div class="life-pane-content">
                <h2 class="life-pane-title" data-i18n="life.see.title">See</h2>
                <div class="life-pane-subtitle" data-i18n="life.see.subtitle">Photography & Vision</div>
            </div>
        </div>

        <!-- PANE 2: LISTEN -->
        <div class="life-pane life-pane-listen" onclick="openGallery('listen')">
            <div class="life-pane-bg"
                style="background-image: url('https://personal-website-images.b-cdn.net/life_listen.jpg'); background-size: cover; background-position: -85% center;">
            </div>
            <div class="life-pane-overlay"></div>
            <div class="life-pane-content">
                <h2 class="life-pane-title" data-i18n="life.listen.title">Listen</h2>
                <div class="life-pane-subtitle" data-i18n="life.listen.subtitle">Music & Sound</div>
            </div>
        </div>

        <!-- PANE 3: MOVE -->
        <div class="life-pane life-pane-move" onclick="openGallery('move')">
            <div class="life-pane-bg"
                style="background-image: url('https://personal-website-images.b-cdn.net/life_move.jpg'); background-size: cover; background-position: 50vw center;">
            </div>
            <div class="life-pane-overlay"></div>
            <div class="life-pane-content">
                <h2 class="life-pane-title" data-i18n="life.move.title">Move</h2>
                <div class="life-pane-subtitle" data-i18n="life.move.subtitle">Kinetic & Travel</div>
            </div>
        </div>
    </section>

    <script src="js/translations.js"></script>
    <script src="js/script.js"></script>
    <script src="js/image-loader.js"></script>
    <script>
        // Precise Preloading Logic (ensures no partial/top-to-bottom loading)
        const imagesToLoad = [
            'https://personal-website-images.b-cdn.net/life_hero.jpg',
            'https://personal-website-images.b-cdn.net/life_see.jpg',
            'https://personal-website-images.b-cdn.net/life_listen.jpg',
            'https://personal-website-images.b-cdn.net/life_move.jpg'
        ];

        function startIntroSequence() {
            const loader = document.getElementById('page-loader');
            const introText = document.querySelector('.life-hero-text');
            const body = document.body;

            // 1. Hide Loader
            loader.style.opacity = '0';
            setTimeout(() => {
                loader.style.visibility = 'hidden';
            }, 800);
            body.classList.remove('loading-active');

            // 2. Start Hero Animation (starts while loader is fading)
            setTimeout(() => {
                introText.classList.add('animate');
            }, 200);

            // 3. Slide Up (optimized duration after load)
            const intro = document.getElementById('lifeIntro');
            setTimeout(() => {
                intro.style.opacity = '0';
                intro.style.transform = 'translateY(-100%)';
                setTimeout(() => {
                    intro.style.display = 'none';
                    sessionStorage.setItem('lifeIntroPlayed', 'true');
                }, 1500);
            }, 2800); // Shortened duration to 2.8s total stay
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Using modern decode() to ensure images are fully rendered in memory
            const preloadImage = (src) => {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.src = src;
                    img.onload = () => {
                        // decode() returns a promise that resolves when image is fully ready to display
                        img.decode().then(resolve).catch(resolve);
                    };
                    img.onerror = resolve; // Continue even on error
                });
            };

            const preloaderTimeout = setTimeout(startIntroSequence, 5000); // 5s absolute cutoff

            Promise.all(imagesToLoad.map(preloadImage)).then(() => {
                clearTimeout(preloaderTimeout);
                startIntroSequence();
            });
        });

        function openGallery(type) {
            if (type === 'see') {
                window.location.href = 'life_see.html';
            } else if (type === 'listen') {
                window.location.href = 'life_listen.html';
            } else if (type === 'move') {
                window.location.href = 'life_move.html';
            } else {
                console.log('Coming soon: ' + type);
            }
        }
    </script>
</body>

</html>